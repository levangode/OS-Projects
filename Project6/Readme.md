###############
Final Project 6
###############
Team A
###############

პროგრამის გაშვების ინსტრუქცია:

1) make
2) ./ServerLauncher /path/to/configfile

დამხმარე ბიბლიოთეკებს არ საჭიროებს


პროგრამის აღწერა:

	Main features:
		* virtual-hosting
		* file transfer
		* CGI
		* log
		* html browsing

	მუშაობის პრინციპი:
		დასტარტვისას პროგრამა პარსავს კონფიგურაციის ფაილს და თითოეული ვირტუალური ჰოსტისთვის, რომლის სტრუქტურაც შემდეგნაირად გამოიყურება:
			struct virtual_server{
			char* vhost;
			char* documentroot;
			char* cgi_bin;
			char* ip;
			char* port;
			char* logg;
			struct sockaddr_in my_addr;
			int socket_fd;
		}; სტარტავს მომსახურე სრედს, რომელიც თავის მხრივ ქმნის სერვერის სოკეტს და ელოდება კლიენტების მიღებას ეპოლით.
			//აქ ეპოლის მუშაობა

		თითოეული შეერთების მიღებისას ყოველი ჰოსტი უშვებს დამატებით მომსახურე სრედს, რომელიც მოემსახურება რექუესტს და დაუბრუნებს რისფონსს. რისფონსის დაბრუნების შემდეგ სრედი კვდება და ქონექშენი იხურება, იმ შემთხვევაში თუ keep-alive იყო მოსული, ეს სრედი კიდევ 5 წამის განმავლობაში დაელოდება ახალი რიქუესთის მიღებას და იდენტურად მოემსახურება მას.

		თითოეული ვირტუალური ჰოსტის სამუშაო დირექტორიები განსაზღვრულია ასევე კონფიგურაციის ფაილის მიხედვით. სერვერი ემსახურება მხოლოდ 
		.html, .jpg, .mp4 ფაილებს, ან დირექტორიებს. ფაილების გადასაგზავნად ვიყენებთ sendfile-ს, და ასევე ჰედერში ვუგზავნით შესაბამის კონტენტის ზომას და ტიპს.

		ყოველ მოთხოვნაზე სერვერი კლიენტს პასუხად უგზავნის შესაბამის სტატუს კოდს 200/404/304.

		ქეშის გასაკონტროლებლად კლიენტს ვუგზავნით ითაგს და მაქს-ეიჯ ჰედერს. ჰეშირებისთვის გამოვიყენეთ მარტივი ალგორითმი stat სტრუქტურის გამოყენებით, რომელიც მოიცავს აიონოუდის ნომერს, ფაილის ცვლილების თარიღს და მის ზომას.

		ფაილის ნაწყვეტ-ნაწყვეტ გასაგზავნად ვპარსავთ რეინჯ ჰედერს და ვუგზავნით შესაბამისი ბაიტების რეინჯს.

		სერვერზე სიჯიაი პროგრამა ეშვება ორ შემთხვევაში: პირველი, როდესაც url-ში ?-ის შემდეგ გადმოგვეცა გასაშვები არგუმენტები და მეორე, როცა კლიენტი მოგვმართავს POST მეთოდით. პოსტის შემთხვევაში პროგრამის არგუმენტებს ვკითხულობთ ბოდიდან და პროგრამას stdin-ში დაუმისამართდება პაიპით, ხოლო პროგრამის output-რომელიც ვალიდური http response უნდა იყოს, გადაეგზავნება ისევ კლიენტს (სოკეტით).




